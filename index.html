<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Geschenke mit Schleifen</title>
<style>
html, body { margin:0; padding:0; height:100%; background:#f0f0f0; font-family:Arial; }
body { display:flex; flex-direction:row; gap:15px; padding:15px; box-sizing:border-box; height:100vh; }
.side { width:15%; display:flex; flex-direction:column; gap:20px; justify-content:center; align-items:center; }
.side img { width:100%; max-width:180px; border-radius:10px; border:2px solid #aaa; background:white; cursor:pointer; touch-action:none; }
.droparea { width:70%; height:100%; background:white; border:3px dashed #777; border-radius:15px; position:relative; overflow:hidden; }
.drop-img { width:100px; height:100px; object-fit:cover; border-radius:10px; position:absolute; touch-action:none; cursor:grab; }
</style>
</head>
<body>

<div class="side">
    <img src="bilder/paket_1.png">
    <img src="bilder/paket_2.png">
    <img src="bilder/paket_3.png">
</div>

<div class="droparea" id="droparea"></div>

<div class="side">
    <img src="bilder/schleife_1.png">
    <img src="bilder/schleife_2.png">
    <img src="bilder/schleife_3.png">
</div>

<script>
const droparea = document.getElementById('droparea');

function createDraggable(img, clientX, clientY) {
    const newImg = img.cloneNode(true);
    newImg.classList.add('drop-img');
    droparea.appendChild(newImg);

    const rect = droparea.getBoundingClientRect();
    // Initiale Position: relativ zur DropflÃ¤che
    let left = clientX - rect.left - newImg.width/2;
    let top = clientY - rect.top - newImg.height/2;

    left = Math.max(0, Math.min(rect.width - newImg.width, left));
    top = Math.max(0, Math.min(rect.height - newImg.height, top));

    newImg.style.left = left + 'px';
    newImg.style.top = top + 'px';

    let offsetX = 0, offsetY = 0, dragging = false;

    function startDrag(cX, cY) {
        const imgRect = newImg.getBoundingClientRect();
        offsetX = cX - imgRect.left;
        offsetY = cY - imgRect.top;
        dragging = true;
        newImg.style.cursor = 'grabbing';
    }

    function moveDrag(cX, cY) {
        if (!dragging) return;
        let newLeft = cX - droparea.getBoundingClientRect().left - offsetX;
        let newTop = cY - droparea.getBoundingClientRect().top - offsetY;

        newLeft = Math.max(0, Math.min(droparea.clientWidth - newImg.width, newLeft));
        newTop = Math.max(0, Math.min(droparea.clientHeight - newImg.height, newTop));

        newImg.style.left = newLeft + 'px';
        newImg.style.top = newTop + 'px';
    }

    function stopDrag() {
        dragging = false;
        newImg.style.cursor = 'grab';
    }

    newImg.addEventListener('mousedown', e => { startDrag(e.clientX, e.clientY); e.preventDefault(); });
    document.addEventListener('mousemove', e => moveDrag(e.clientX, e.clientY));
    document.addEventListener('mouseup', stopDrag);

    newImg.addEventListener('touchstart', e => { 
        const t = e.touches[0]; startDrag(t.clientX, t.clientY); e.preventDefault(); 
    });
    newImg.addEventListener('touchmove', e => { 
        const t = e.touches[0]; moveDrag(t.clientX, t.clientY); e.preventDefault(); 
    });
    newImg.addEventListener('touchend', stopDrag);
}

// Klick oder Touch auf Sidebar-Bilder
document.querySelectorAll('.side img').forEach(img => {
    img.addEventListener('mousedown', e => createDraggable(img, e.clientX, e.clientY));
    img.addEventListener('touchstart', e => {
        const t = e.touches[0];
        createDraggable(img, t.clientX, t.clientY);
        e.preventDefault();
    });
});
</script>

</body>
</html>
