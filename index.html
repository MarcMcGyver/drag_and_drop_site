<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Geschenke mit Schleifen</title>
<style>
    html, body {
        margin: 0;
        padding: 15px;
        height: 100%;
        background: #f0f0f0;
        font-family: Arial, sans-serif;
        box-sizing: border-box;
    }

    body {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: stretch;
        gap: 15px;
    }

    .side {
        width: 15%;
        display: flex;
        flex-direction: column;
        gap: 20px;
        justify-content: center;
        align-items: center;
    }

    .side img {
        width: 100%;
        max-width: 180px;
        border-radius: 10px;
        border: 2px solid #aaa;
        background: white;
        cursor: grab;
    }

    .droparea {
        width: 70%;
        height: 100%;
        background: white;
        border: 3px dashed #777;
        border-radius: 15px;
        position: relative;
        overflow: hidden;
        touch-action: none; /* wichtig f√ºr iPad */
    }

    .droparea.active {
        border-color: #4CAF50;
    }

    .drop-img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 10px;
        border: 2px solid #333;
        position: absolute;
        cursor: grab;
        touch-action: none;
    }
</style>
</head>
<body>

<!-- Linke Bilder -->
<div class="side">
    <img src="bilder/slice1.png">
    <img src="bilder/slice2.png">
    <img src="bilder/slice3.png">
</div>

<!-- Drop-Bereich -->
<div class="droparea" id="droparea"></div>

<!-- Rechte Bilder -->
<div class="side">
    <img src="bilder/slice4.png">
    <img src="bilder/slice5.png">
    <img src="bilder/slice6.png">
</div>

<script>
const droparea = document.getElementById('droparea');

function enableDraggingInside(img) {
    let offsetX = 0, offsetY = 0;
    let isDragging = false;

    // Maus
    img.addEventListener('mousedown', e => {
        isDragging = true;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
        img.style.cursor = 'grabbing';
    });

    document.addEventListener('mousemove', e => {
        if (!isDragging) return;
        const rect = droparea.getBoundingClientRect();
        img.style.left = (e.clientX - rect.left - offsetX) + 'px';
        img.style.top = (e.clientY - rect.top - offsetY) + 'px';
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        img.style.cursor = 'grab';
    });

    // Touch
    img.addEventListener('touchstart', e => {
        isDragging = true;
        const touch = e.touches[0];
        const rect = img.getBoundingClientRect();
        offsetX = touch.clientX - rect.left;
        offsetY = touch.clientY - rect.top;
        img.style.cursor = 'grabbing';
        e.preventDefault();
    });

    document.addEventListener('touchmove', e => {
        if (!isDragging) return;
        const touch = e.touches[0];
        const rect = droparea.getBoundingClientRect();
        img.style.left = (touch.clientX - rect.left - offsetX) + 'px';
        img.style.top = (touch.clientY - rect.top - offsetY) + 'px';
    }, { passive: false });

    document.addEventListener('touchend', () => {
        isDragging = false;
        img.style.cursor = 'grab';
    });
}

// Drag von den Seitenbildern in Droparea
document.querySelectorAll('.side img').forEach(img => {

    // Maus Drag
    img.addEventListener('mousedown', e => {
        createDraggableClone(img, e.clientX, e.clientY);
    });

    // Touch Drag
    img.addEventListener('touchstart', e => {
        const touch = e.touches[0];
        createDraggableClone(img, touch.clientX, touch.clientY);
        e.preventDefault();
    });
});

function createDraggableClone(original, clientX, clientY) {
    const newImg = original.cloneNode(true);
    newImg.classList.add('drop-img');
    newImg.draggable = false;

    droparea.appendChild(newImg);

    const rect = droparea.getBoundingClientRect();
    newImg.style.left = (clientX - rect.left - newImg.width/2) + 'px';
    newImg.style.top = (clientY - rect.top - newImg.height/2) + 'px';

    enableDraggingInside(newImg);
}
</script>

</body>
</html>
